<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Appointment App</title>
   
</head>
<body>
    <div class="container">
        <h1>Booking Appointment</h1>
        <form id="bookingForm">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>

            <label for="email">Email ID:</label>
            <input type="email" id="email" name="email" required>

            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" name="phone" required>

            <button type="submit">Book Appointment</button>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
            <script>document.getElementById('bookingForm').addEventListener('submit', function (event) {
                event.preventDefault();
              
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
              
                const appointment = {
                    name,
                    email,
                    phone,
                };
              
                let appointmentsList = JSON.parse(localStorage.getItem('appointmentsList') || '[]');
                appointmentsList.push(appointment);
                localStorage.setItem('appointmentsList', JSON.stringify(appointmentsList));
              
                showAppointments();
              });
              
              function showAppointments() {
                const appointmentsList = JSON.parse(localStorage.getItem('appointmentsList') || '[]');
                const listElement = document.getElementById('list');
                listElement.innerHTML = '';
              
                appointmentsList.forEach((appointment, index) => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `
                        <span>Name: ${appointment.name}</span><br>
                        <span>Email ID: ${appointment.email}</span><br>
                        <span>Phone Number: ${appointment.phone}</span><br>
                        <button onclick="editAppointment(${index})">Edit</button>
                        <button onclick="deleteAppointment(${index})">Delete</button>
                        <hr>
                    `;
                    listElement.appendChild(listItem);
                });
              
                const appointmentsListDiv = document.getElementById('appointmentsList');
                appointmentsListDiv.style.display = 'block';
              }
              
              function editAppointment(index) {
                let appointmentsList = JSON.parse(localStorage.getItem('appointmentsList') || '[]');
                const appointment = appointmentsList[index];
                if (!appointment) {
                    return;
                }
              
                document.getElementById('name').value = appointment.name;
                document.getElementById('email').value = appointment.email;
                document.getElementById('phone').value = appointment.phone;
              
                appointmentsList.splice(index, 1);
                localStorage.setItem('appointmentsList', JSON.stringify(appointmentsList));
              
                showAppointments();
              }
              
              //function deleteAppointment(index) {
                function deleteAppointment(_id) {
  axios.delete(`https://crudcrud.com/api/5e913bf4bbbc45b390f47369020d1d1c/appointments/${_id}`)
    .then(() => {
      showAppointments();
    })
    .catch((err) => {
      console.error(err);
    });
}

function showAppointments() {
  axios.get('https://crudcrud.com/api/5e913bf4bbbc45b390f47369020d1d1c/appointments')
    .then((response) => {
      const appointmentsList = response.data;
      const listElement = document.getElementById('list');
      listElement.innerHTML = '';

      appointmentsList.forEach((appointment) => {
        const listItem = document.createElement('li');
        listItem.innerHTML = `
          <span>Name: ${appointment.name}</span><br>
          <span>Email ID: ${appointment.email}</span><br>
          <span>Phone Number: ${appointment.phone}</span><br>
          <button onclick="editAppointment('${appointment._id}')">Edit</button>
          <button onclick="deleteAppointment('${appointment._id}')">Delete</button>
          <hr>
        `;
        listElement.appendChild(listItem);
      });

      const appointmentsListDiv = document.getElementById('appointmentsList');
      appointmentsListDiv.style.display = 'block';
    })
    .catch((err) => {
      console.error(err);
    });
}

showAppointments();

              showAppointments();
              </script>
        </form>

        <div id="appointmentsList">
            <h2>Appointments List</h2>
            <ul id="list"></ul>
        </div>
    </div>

    
</body>
</html>
